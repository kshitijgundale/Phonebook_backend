(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(15),o=n.n(c),a=n(6),u=n(3),i=n(0),s=function(e){var t=e.person,n=e.deletePerson;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("p",{children:[t.name," ",t.number]}),Object(i.jsx)("button",{onClick:function(){n(t.id,t.name)},children:"Delete"})]})},d=function(e){var t=e.persons,n=e.searchName,r=e.deletePerson;return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(i.jsx)(s,{person:e,deletePerson:r},e.name)}))},l=function(e){var t=e.searchName,n=e.setSearchName;return Object(i.jsxs)("div",{children:["Search by Name: ",Object(i.jsx)("input",{onChange:function(e){return n(e.target.value)},value:t})]})},b=function(e){var t=e.addPerson,n=e.setNewName,r=e.setNewNumber,c=e.newName,o=e.newNumber;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:function(e){return n(e.target.value)},value:c}),"number: ",Object(i.jsx)("input",{onChange:function(e){return r(e.target.value)},value:o})]}),Object(i.jsxs)("div",{children:["debug: ",c]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=n(4),f=n.n(j),m="api/persons",h={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},add:function(e){return f.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(m,"/").concat(e))},update:function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))}},p=function(e){var t=e.text,n=e.type,r={color:"",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return r.color="error"===n?"red":"green",null===t?null:Object(i.jsx)("div",{style:r,children:t})},O=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),s=Object(u.a)(o,2),j=s[0],f=s[1],m=Object(r.useState)(""),O=Object(u.a)(m,2),x=O[0],v=O[1],N=Object(r.useState)(""),g=Object(u.a)(N,2),w=g[0],y=g[1],S=Object(r.useState)(null),k=Object(u.a)(S,2),P=k[0],C=k[1];Object(r.useEffect)((function(){h.getAll().then((function(e){c(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),P?Object(i.jsx)(p,{text:P.text,type:P.type}):Object(i.jsx)(i.Fragment,{}),Object(i.jsx)("h2",{children:"Search"}),Object(i.jsx)(l,{searchName:w,setSearchName:y}),Object(i.jsx)("h2",{children:"Add a Number"}),Object(i.jsx)(b,{newName:j,newNumber:x,setNewName:f,setNewNumber:v,addPerson:function(e){e.preventDefault();var t={name:j,number:x};if(n.some((function(e){return e.name===j}))){if(window.confirm("".concat(j," already exists, replace old number with new one?"))){var r=n.find((function(e){return e.name===j})),o=Object(a.a)(Object(a.a)({},r),{},{number:x});h.update(r.id,o).then((function(e){c(n.map((function(t){return t.id!==r.id?t:e}))),f(""),v(""),C({text:"".concat(r.name," has been updated"),type:"error"}),setTimeout((function(){C(null)}),3e3)})).catch((function(e){c(n.filter((function(e){return e.id!==r.id}))),C({text:"".concat(r.name," has already been deleted"),type:"error"}),setTimeout((function(){C(null)}),3e3)}))}}else h.add(t).then((function(e){c(n.concat(e)),f(""),v(""),C({text:"Added ".concat(e.name),type:"success"}),setTimeout((function(){C(null)}),3e3)})).catch((function(e){console.log(e.response.data),C({text:e.response.data.error,type:"error"}),setTimeout((function(){C(null)}),3e3)}))}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{persons:n,searchName:w,deletePerson:function(e,t){window.confirm("Delete ".concat(t))&&h.remove(e).then((function(){c(n.filter((function(t){return t.id!==e}))),C({text:"Deleted ".concat(t),type:"success"}),setTimeout((function(){C(null)}),3e3)})).catch((function(r){c(n.filter((function(t){return t.id!==e}))),C({text:"".concat(t," has already been deleted"),type:"error"}),setTimeout((function(){C(null)}),3e3)}))}})]})};o.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.0c54e649.chunk.js.map